<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>环境保护综合信息平台</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f0f8f0;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* 头部样式 */
        header {
            background: linear-gradient(135deg, #1e5631 0%, #2d8c4a 100%);
            color: white;
            padding: 1.5rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
            color: #a4de02;
        }
        
        .logo-text h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .logo-text p {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s;
            padding: 8px 12px;
            border-radius: 4px;
        }
        
        nav a:hover, nav a.active {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .header-actions {
            display: flex;
            gap: 15px;
        }
        
        .header-actions button {
            background-color: #a4de02;
            color: #1e5631;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .header-actions button:hover {
            background-color: #8bc600;
            transform: translateY(-2px);
        }
        
        /* 主要内容区 */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
            margin: 30px 0;
        }
        
        /* 卡片样式 */
        .card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 25px;
            margin-bottom: 30px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #e8f5e9;
            padding-bottom: 15px;
        }
        
        .card-header h2 {
            color: #1e5631;
            font-size: 1.5rem;
        }
        
        .card-header i {
            color: #2d8c4a;
            font-size: 1.8rem;
        }
        
        /* 仪表盘样式 */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #f8fff8 0%, #e8f5e9 100%);
            border-left: 5px solid #2d8c4a;
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1e5631;
            margin: 10px 0;
        }
        
        .stat-change {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }
        
        .positive {
            color: #2d8c4a;
        }
        
        .negative {
            color: #e74c3c;
        }
        
        /* 图表容器 */
        .chart-container {
            height: 300px;
            margin-top: 20px;
            position: relative;
        }
        
        /* 地图容器 */
        #environment-map {
            height: 400px;
            border-radius: 8px;
            margin-top: 20px;
            z-index: 1;
        }
        
        /* 侧边栏样式 */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        .news-item {
            display: flex;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        .news-item:last-child {
            border-bottom: none;
        }
        
        .news-date {
            background-color: #2d8c4a;
            color: white;
            width: 60px;
            height: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }
        
        .news-date .day {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .news-date .month {
            font-size: 0.9rem;
        }
        
        .news-content h4 {
            color: #1e5631;
            margin-bottom: 5px;
        }
        
        /* 计算器样式 */
        .calculator {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
        }
        
        .calculator-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
        }
        
        .input-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #1e5631;
        }
        
        .input-group input, .input-group select {
            padding: 12px;
            border: 1px solid #c8e6c9;
            border-radius: 6px;
            font-size: 1rem;
        }
        
        .calculator-result {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-top: 20px;
            display: none;
        }
        
        .result-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #1e5631;
            margin: 10px 0;
        }
        
        /* 行动追踪器 */
        .action-tracker {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .action-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background-color: #f8fff8;
            border-radius: 8px;
            border: 1px solid #e8f5e9;
        }
        
        .action-checkbox {
            width: 24px;
            height: 24px;
            accent-color: #2d8c4a;
        }
        
        .action-text {
            flex: 1;
        }
        
        .action-points {
            background-color: #a4de02;
            color: #1e5631;
            font-weight: 700;
            padding: 5px 10px;
            border-radius: 50px;
            font-size: 0.9rem;
        }
        
        /* 底部样式 */
        footer {
            background-color: #1e5631;
            color: white;
            padding: 50px 0 20px;
            margin-top: 50px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 30px;
        }
        
        .footer-section h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }
        
        .footer-section h3::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 50px;
            height: 3px;
            background-color: #a4de02;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 12px;
        }
        
        .footer-links a {
            color: #c8e6c9;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .footer-links a:hover {
            color: #a4de02;
            padding-left: 5px;
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .social-icons a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .social-icons a:hover {
            background-color: #a4de02;
            transform: translateY(-3px);
        }
        
        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            color: #c8e6c9;
        }
        
        /* 响应式设计 */
        @media (max-width: 1100px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
            }
            
            .dashboard-cards {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .calculator-inputs {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            
            .card {
                padding: 20px;
            }
            
            .stat-value {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- 头部区域 -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-leaf"></i>
                <div class="logo-text">
                    <h1>环境保护综合信息平台</h1>
                    <p>守护地球家园，共建绿色未来</p>
                </div>
            </div>
            <nav>
                <ul>
                    <li><a href="#" class="active">环境仪表盘</a></li>
                    <li><a href="#">空气质量</a></li>
                    <li><a href="#">水质监测</a></li>
                    <li><a href="#">生态保护</a></li>
                    <li><a href="#">环保政策</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <button id="report-btn"><i class="fas fa-exclamation-triangle"></i> 报告环境问题</button>
                <button id="pledge-btn"><i class="fas fa-hands"></i> 参与环保承诺</button>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- 仪表盘卡片 -->
        <div class="dashboard-cards">
            <div class="card stat-card">
                <h3><i class="fas fa-wind"></i> 空气质量指数 (AQI)</h3>
                <div class="stat-value">42</div>
                <p>良好</p>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-down"></i> 比昨日改善 8%
                </div>
            </div>
            
            <div class="card stat-card">
                <h3><i class="fas fa-tint"></i> 城市水质评级</h3>
                <div class="stat-value">I 类</div>
                <p>优质饮用水源</p>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i> 稳定保持优质
                </div>
            </div>
            
            <div class="card stat-card">
                <h3><i class="fas fa-tree"></i> 森林覆盖率</h3>
                <div class="stat-value">24.1%</div>
                <p>全国平均水平</p>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i> 比去年增长 0.5%
                </div>
            </div>
            
            <div class="card stat-card">
                <h3><i class="fas fa-recycle"></i> 垃圾分类率</h3>
                <div class="stat-value">68%</div>
                <p>城市居民参与度</p>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i> 比去年增长 12%
                </div>
            </div>
        </div>

        <!-- 主要内容区域 -->
        <div class="main-content">
            <!-- 左栏 -->
            <div class="left-column">
                <!-- 空气质量图表 -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-chart-line"></i> 过去7天空气质量趋势</h2>
                        <select id="city-select">
                            <option value="beijing">北京市</option>
                            <option value="shanghai">上海市</option>
                            <option value="guangzhou">广州市</option>
                            <option value="chengdu">成都市</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="air-quality-chart"></canvas>
                    </div>
                </div>
                
                <!-- 环境地图 -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-map-marked-alt"></i> 环境监测点分布</h2>
                        <div class="map-legend">
                            <span><i class="fas fa-circle" style="color:#2d8c4a"></i> 优良</span>
                            <span><i class="fas fa-circle" style="color:#f39c12"></i> 一般</span>
                            <span><i class="fas fa-circle" style="color:#e74c3c"></i> 污染</span>
                        </div>
                    </div>
                    <div id="environment-map"></div>
                </div>
            </div>
            
            <!-- 右栏（侧边栏） -->
            <div class="sidebar">
                <!-- 环保计算器 -->
                <div class="card calculator">
                    <div class="card-header">
                        <h2><i class="fas fa-calculator"></i> 碳排放计算器</h2>
                    </div>
                    <p>计算您的日常活动产生的碳排放量</p>
                    
                    <div class="calculator-inputs">
                        <div class="input-group">
                            <label for="transport">交通方式</label>
                            <select id="transport">
                                <option value="car">私家车 (汽油)</option>
                                <option value="bus">公共汽车</option>
                                <option value="train">火车</option>
                                <option value="bike">自行车/步行</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label for="distance">每日里程 (公里)</label>
                            <input type="number" id="distance" value="20" min="0" max="500">
                        </div>
                        
                        <div class="input-group">
                            <label for="electricity">每月用电量 (kWh)</label>
                            <input type="number" id="electricity" value="200" min="0" max="5000">
                        </div>
                        
                        <div class="input-group">
                            <label for="diet">饮食类型</label>
                            <select id="diet">
                                <option value="meat">常吃肉食</option>
                                <option value="balanced">均衡饮食</option>
                                <option value="vegetarian">素食</option>
                                <option value="vegan">纯素食</option>
                            </select>
                        </div>
                    </div>
                    
                    <button id="calculate-btn" class="header-actions" style="width:100%; padding:15px; margin-top:10px;">
                        <i class="fas fa-calculator"></i> 计算碳排放
                    </button>
                    
                    <div id="calculator-result" class="calculator-result">
                        <h3>您的年碳排放量</h3>
                        <div class="result-value" id="carbon-result">0 kg</div>
                        <p>相当于 <span id="tree-equivalent">0</span> 棵树一年吸收的二氧化碳量</p>
                        <p style="margin-top:10px; font-size:0.9rem; color:#666;">
                            <i class="fas fa-lightbulb"></i> 建议：尝试公共交通、减少用电、多吃植物性食物
                        </p>
                    </div>
                </div>
                
                <!-- 环保新闻 -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-newspaper"></i> 最新环保动态</h2>
                    </div>
                    
                    <div class="news-item">
                        <div class="news-date">
                            <div class="day">15</div>
                            <div class="month">6月</div>
                        </div>
                        <div class="news-content">
                            <h4>国家林业局启动新一期植树计划</h4>
                            <p>目标在未来五年内新增森林面积500万公顷...</p>
                        </div>
                    </div>
                    
                    <div class="news-item">
                        <div class="news-date">
                            <div class="day">10</div>
                            <div class="month">6月</div>
                        </div>
                        <div class="news-content">
                            <h4>新能源汽车销量同比增长45%</h4>
                            <p>政府补贴政策推动电动汽车市场快速发展...</p>
                        </div>
                    </div>
                    
                    <div class="news-item">
                        <div class="news-date">
                            <div class="day">05</div>
                            <div class="month">6月</div>
                        </div>
                        <div class="news-content">
                            <h4>长江流域水质持续改善</h4>
                            <p>监测数据显示，I-III类水质断面比例达87%...</p>
                        </div>
                    </div>
                    
                    <div class="news-item">
                        <div class="news-date">
                            <div class="day">28</div>
                            <div class="month">5月</div>
                        </div>
                        <div class="news-content">
                            <h4>全球气候峰会达成新减排协议</h4>
                            <p>各国同意在2030年前将碳排放减少50%...</p>
                        </div>
                    </div>
                </div>
                
                <!-- 环保行动追踪 -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-tasks"></i> 今日环保行动</h2>
                        <span id="action-points">0 积分</span>
                    </div>
                    
                    <div class="action-tracker">
                        <div class="action-item">
                            <input type="checkbox" class="action-checkbox" id="action1">
                            <div class="action-text">
                                <label for="action1">使用公共交通或自行车出行</label>
                            </div>
                            <div class="action-points">+10</div>
                        </div>
                        
                        <div class="action-item">
                            <input type="checkbox" class="action-checkbox" id="action2">
                            <div class="action-text">
                                <label for="action2">减少一次性塑料制品使用</label>
                            </div>
                            <div class="action-points">+15</div>
                        </div>
                        
                        <div class="action-item">
                            <input type="checkbox" class="action-checkbox" id="action3">
                            <div class="action-text">
                                <label for="action3">合理分类垃圾并投放</label>
                            </div>
                            <div class="action-points">+8</div>
                        </div>
                        
                        <div class="action-item">
                            <input type="checkbox" class="action-checkbox" id="action4">
                            <div class="action-text">
                                <label for="action4">节约用水用电（关闭未使用电器）</label>
                            </div>
                            <div class="action-points">+12</div>
                        </div>
                        
                        <div class="action-item">
                            <input type="checkbox" class="action-checkbox" id="action5">
                            <div class="action-text">
                                <label for="action5">购买本地和季节性食品</label>
                            </div>
                            <div class="action-points">+5</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 页脚区域 -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>关于我们</h3>
                    <p>环境保护综合信息平台致力于提供准确的环境数据、环保知识和行动指南，推动公众参与环境保护，共建美丽中国。</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-weixin"></i></a>
                        <a href="#"><i class="fab fa-weibo"></i></a>
                        <a href="#"><i class="fab fa-qq"></i></a>
                        <a href="#"><i class="fab fa-github"></i></a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3>快速链接</h3>
                    <ul class="footer-links">
                        <li><a href="#">环境数据API</a></li>
                        <li><a href="#">环保法律法规</a></li>
                        <li><a href="#">环保志愿者招募</a></li>
                        <li><a href="#">企业环保责任</a></li>
                        <li><a href="#">环保项目资助</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>资源中心</h3>
                    <ul class="footer-links">
                        <li><a href="#">环保知识库</a></li>
                        <li><a href="#">碳排放计算工具</a></li>
                        <li><a href="#">环境监测报告</a></li>
                        <li><a href="#">绿色产品认证</a></li>
                        <li><a href="#">环保活动日历</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>联系我们</h3>
                    <p><i class="fas fa-map-marker-alt"></i> 北京市朝阳区环保大厦</p>
                    <p><i class="fas fa-phone"></i> 环保热线: 12369</p>
                    <p><i class="fas fa-envelope"></i> contact@greenchina.org</p>
                    <p><i class="fas fa-clock"></i> 周一至周五 9:00-18:00</p>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2023 环境保护综合信息平台. 保留所有权利. 数据仅供参考，请以官方发布为准.</p>
                <p>本平台由绿色未来基金会支持 | 京ICP备12345678号</p>
            </div>
        </div>
    </footer>

    <script>
        // 初始化空气质量图表
        const ctx = document.getElementById('air-quality-chart').getContext('2d');
        const airQualityChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['6天前', '5天前', '4天前', '3天前', '前天', '昨天', '今天'],
                datasets: [{
                    label: 'AQI指数',
                    data: [65, 59, 70, 65, 56, 48, 42],
                    backgroundColor: 'rgba(46, 140, 74, 0.1)',
                    borderColor: '#2d8c4a',
                    borderWidth: 3,
                    tension: 0.3,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 30,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        },
                        title: {
                            display: true,
                            text: 'AQI指数'
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    }
                }
            }
        });

        // 城市选择器事件
        document.getElementById('city-select').addEventListener('change', function(e) {
            const city = e.target.value;
            // 模拟不同城市的数据
            const cityData = {
                beijing: [65, 59, 70, 65, 56, 48, 42],
                shanghai: [55, 52, 58, 54, 50, 45, 40],
                guangzhou: [70, 65, 68, 62, 58, 52, 48],
                chengdu: [75, 72, 78, 70, 68, 62, 58]
            };
            
            airQualityChart.data.datasets[0].data = cityData[city];
            airQualityChart.update();
        });

        // 初始化地图
        const map = L.map('environment-map').setView([39.9042, 116.4074], 4);
        
        // 添加地图图层
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        
        // 添加监测点标记
        const monitoringPoints = [
            {lat: 39.9042, lng: 116.4074, name: "北京监测站", quality: "优良", color: "#2d8c4a"},
            {lat: 31.2304, lng: 121.4737, name: "上海监测站", quality: "优良", color: "#2d8c4a"},
            {lat: 23.1291, lng: 113.2644, name: "广州监测站", quality: "一般", color: "#f39c12"},
            {lat: 30.5728, lng: 104.0668, name: "成都监测站", quality: "一般", color: "#f39c12"},
            {lat: 41.7922, lng: 123.4328, name: "沈阳监测站", quality: "污染", color: "#e74c3c"},
            {lat: 34.3416, lng: 108.9398, name: "西安监测站", quality: "一般", color: "#f39c12"},
            {lat: 36.0611, lng: 120.3695, name: "青岛监测站", quality: "优良", color: "#2d8c4a"},
            {lat: 29.4316, lng: 106.9123, name: "重庆监测站", quality: "污染", color: "#e74c3c"}
        ];
        
        monitoringPoints.forEach(point => {
            L.circleMarker([point.lat, point.lng], {
                color: point.color,
                fillColor: point.color,
                fillOpacity: 0.7,
                radius: 10
            }).addTo(map).bindPopup(`<b>${point.name}</b><br>环境质量: ${point.quality}`);
        });

        // 碳排放计算器
        document.getElementById('calculate-btn').addEventListener('click', function() {
            // 获取输入值
            const transport = document.getElementById('transport').value;
            const distance = parseFloat(document.getElementById('distance').value);
            const electricity = parseFloat(document.getElementById('electricity').value);
            const diet = document.getElementById('diet').value;
            
            // 计算碳排放（简化计算）
            let transportEmission = 0;
            switch(transport) {
                case 'car': transportEmission = distance * 0.2 * 365; break;
                case 'bus': transportEmission = distance * 0.05 * 365; break;
                case 'train': transportEmission = distance * 0.03 * 365; break;
                case 'bike': transportEmission = 0; break;
            }
            
            let electricityEmission = electricity * 0.8 * 12; // 每月转年排放
            
            let dietEmission = 0;
            switch(diet) {
                case 'meat': dietEmission = 2500; break;
                case 'balanced': dietEmission = 2000; break;
                case 'vegetarian': dietEmission = 1500; break;
                case 'vegan': dietEmission = 1000; break;
            }
            
            // 总排放量（kg CO2/年）
            const totalEmission = Math.round(transportEmission + electricityEmission + dietEmission);
            
            // 显示结果
            document.getElementById('carbon-result').textContent = totalEmission.toLocaleString() + ' kg';
            document.getElementById('tree-equivalent').textContent = Math.round(totalEmission / 20); // 每棵树年吸收约20kg CO2
            document.getElementById('calculator-result').style.display = 'block';
        });

        // 环保行动追踪
        const actionCheckboxes = document.querySelectorAll('.action-checkbox');
        const actionPointsElement = document.getElementById('action-points');
        
        function updateActionPoints() {
            let totalPoints = 0;
            actionCheckboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    const points = parseInt(checkbox.parentElement.nextElementSibling.textContent.replace('+', ''));
                    totalPoints += points;
                }
            });
            actionPointsElement.textContent = totalPoints + ' 积分';
        }
        
        actionCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', updateActionPoints);
        });

        // 报告环境问题按钮
        document.getElementById('report-btn').addEventListener('click', function() {
            alert('感谢您对环境问题的关注！报告功能正在开发中，请稍后访问。');
        });

        // 参与环保承诺按钮
        document.getElementById('pledge-btn').addEventListener('click', function() {
            alert('感谢您参与环保承诺！请选择您愿意采取的环保行动：\n1. 每周至少一天公共交通出行\n2. 减少一次性塑料使用\n3. 每月参与一次社区清洁活动\n4. 节约用水用电，随手关灯关水\n\n您的承诺将帮助我们建设更美好的环境！');
        });

        // 页面加载完成后显示计算器结果（模拟数据）
        window.addEventListener('load', function() {
            // 模拟计算器结果
            setTimeout(() => {
                document.getElementById('calculate-btn').click();
            }, 1000);
            
            // 随机勾选一些环保行动
            const randomActions = [0, 1, 3]; // 随机勾选第1、2、4项
            randomActions.forEach(index => {
                if (actionCheckboxes[index]) {
                    actionCheckboxes[index].checked = true;
                }
            });
            updateActionPoints();
        });
    </script>
</body>
</html>
